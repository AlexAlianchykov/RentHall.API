# RentHall.API
Проект представляет собой RESTful API на C# с использованием подхода Code First и Entity Framework Core. Архитектура проекта придерживается принципов Чистой архитектуры Роберта Мартина (Дяди Боба). В проекте используется богатая доменная модель с подходом DDD (Domain-Driven Design). В основе API лежит четкое разделение слоев: Домен (объекты значений, сущности, агрегаты и абстракции), Приложение (сервисы и бизнес-правила), Инфраструктура (доступ к данным и внешние сервисы) и Презентация (контроллеры). Внедрение зависимостей (DI) через IoC-контейнер позволяет управлять зависимостями и изолировать логику для легкого тестирования и расширяемости. Все слои четко разделены, с минимальными связями между ними, а доменная логика сконцентрирована в богатых моделях, которые включают бизнес-правила и инварианты. Также в проекте есть аутентификация, хеширование пароля и логика авторизации на основе ролей. Аутентификация происходит с помощью создания JWT-токена, который затем хранится в cookie. 
## Что делает проект 
RentHall.API разработан как API для управления конференц-залами, их бронирования, расчёта стоимости услуг, а также аналитики. Клиент может найти свободный зал и забронировать его на определённое время, при этом узнать точную стоимость бронирования. Стоимость бронирования зависит от длительности аренды зала, а также дополнительных услуг и времени бронирования. У админа есть возможность проводить стандартные CRUD операции с залами, а также дополнительными услугами и доступ к аналитике.   
## Архитектура проекта 
На основе принципов Чистой архитектуры Роберта Мартина (Дяди Боба) была разработана следующая архитектура:
<br><br>
![image](https://github.com/user-attachments/assets/038fbf02-46f9-4b7d-9f82-56e2f2cf854e)
<br><br>
### В слое Core:
1) Спроектирована доменная логика в богатых моделях, которые включают бизнес-правила, валидацию.
2) Также он содержит абстракции.

Основная цель слоя Core — сосредоточить всю бизнес-логику и правила предметной области. Core не знает, как данные будут храниться или передаваться. Весь доступ к данным осуществляется через абстракции, такие как репозитории или сервисы.
<br><br>
Сам слой Domain организован следущим способом, есть 2 агрегата: 
##### 1) AggregateHall
   
У которого aggregate root - Hall.

C сущностями:
   1. Hall (у него есть Value Object - Price)
   2. Booking
   3. AdditionalServices (у него есть Value Object - Price)

##### 2) AggregateUser
   
У которого aggregate root - User.

C сущностями:
   1. User (у него есть Value Object - Email)

<br><br>
### В слое Application:
Реализованы сервисы и абстракции. Сам слой Application является промежуточным между доменным слоем (где находится бизнес-логика) и внешними слоями. Основная цель слоя Application — это координация бизнес-логики и обработка запросов приложения, но при этом он не должен содержать саму бизнес-логику. Этот слой отвечает за то, как использовать доменные объекты и сервисы для достижения конкретных задач.

<br><br>
### В слое DataAccess:
Созданы сущности, которые будут храниться в БД, настроены их конфигурации, и здесь находится ApplicationDbContext, с помощью которого выполняются CRUD-операции. Также здесь расположены репозитории, где непосредственно обрабатываются CRUD-операции. Основная задача слоя DataAccess — физическое чтение и запись данных в базу данных, а также выполнение сложных запросов и манипуляций с данными. Также в слое DataAccess хранятся и управляются миграции базы данных для изменения её схемы в соответствии с изменениями в моделях.

Структура базы данных выглядит следующим образом:
![image](https://github.com/user-attachments/assets/d52838eb-13d6-496b-8c4f-25f1e32118d2)




















